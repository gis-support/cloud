{"basePath":"/","definitions":{},"host":"cloud.gis.support","info":{"contact":{"email":"","responsibleDeveloper":"","responsibleOrganization":"","url":""},"description":"","termsOfService":"","title":"Cloud","version":"0.1"},"operationId":"getmyData","paths":{"/api/check_token":{"get":{"parameters":[{"description":"Token","in":"query","name":"token","required":false,"type":"string"}],"produces":["application/json"],"responses":{"200":{"description":"Token","schema":{"properties":{"token":{"description":"Valid","type":"string"}},"type":"object"}},"403":{"description":"Token required","schema":{"properties":{"error":{"example":"invalid token","type":"string"}},"type":"object"}}},"summary":"Check token","tags":["Auth"]}},"/api/layers":{"get":{"parameters":[{"description":"Token","in":"query","name":"token","required":false,"type":"string"}],"produces":["application/json"],"responses":{"200":{"description":"Layers","schema":{"properties":{"layers":{"items":{"properties":{"id":{"description":"Layer ID","type":"string"},"name":{"description":"Layer name","type":"string"}},"type":"object"},"type":"array"}},"type":"object"}},"403":{"description":"Token required","schema":{"properties":{"error":{"example":"token required","type":"string"}},"type":"object"}}},"summary":"Get layers","tags":["Layers"]},"post":{"parameters":[{"description":"Layer file","in":"formData","name":"file","required":true,"type":"file"},{"description":"Layer name","example":"test","in":"formData","name":"name","required":true,"type":"string"},{"description":"Encoding","example":"cp1250","in":"formData","name":"encoding","required":false,"type":"string"},{"description":"EPSG number, 4326 default","example":"4326","in":"formData","name":"epsg","required":false,"type":"string"},{"description":"Token","in":"query","name":"token","required":false,"type":"string"}],"produces":["application/json"],"responses":{"201":{"description":"Confirmation","schema":{"properties":{"layers":{"properties":{"features":{"description":"Number of features","type":"integer"},"id":{"description":"Layer ID","type":"string"},"name":{"description":"Layer name","type":"string"}},"type":"object"}},"type":"object"}},"401":{"description":"File is (required/invalid) / Name is required / Layer already exists","schema":{"properties":{"error":{"example":"file is required","type":"string"}},"type":"object"}},"403":{"description":"Token required","schema":{"properties":{"error":{"example":"token required","type":"string"}},"type":"object"}}},"summary":"Add layer","tags":["Layers"]}},"/api/layers/{lid}":{"delete":{"parameters":[{"description":"Layer ID","in":"path","name":"lid","required":true,"type":"string"},{"description":"Token","in":"query","name":"token","required":false,"type":"string"}],"produces":["application/json"],"responses":{"200":{"description":"Confirmation","schema":{"properties":{"layers":{"example":"layer deleted","type":"string"}},"type":"object"}},"403":{"description":"Token required","schema":{"properties":{"error":{"example":"token required","type":"string"}},"type":"object"}}},"summary":"Delete layer","tags":["Layers"]},"get":{"parameters":[{"description":"Layer ID","in":"path","name":"lid","required":true,"type":"string"},{"description":"Token","in":"query","name":"token","required":false,"type":"string"}],"produces":["application/json"],"responses":{"200":{"description":"GeoJSON","schema":{"properties":{"features":{"items":{"properties":{"geometry":{"type":"object"},"properties":{"type":"object"},"type":{"example":"Feature","type":"string"}},"type":"object"},"type":"array"},"type":{"example":"FeatureCollection","type":"string"}},"type":"object"}},"403":{"description":"Token required","schema":{"properties":{"error":{"example":"token required","type":"string"}},"type":"object"}}},"summary":"Get layer","tags":["Layers"]}},"/api/layers/{lid}/categories/{attr}":{"get":{"parameters":[{"description":"Layer ID","in":"path","name":"lid","required":true,"type":"string"},{"description":"Layer attribute","in":"path","name":"attr","required":true,"type":"string"},{"description":"Token","in":"query","name":"token","required":false,"type":"string"}],"produces":["application/json"],"responses":{"200":{"schema":{"properties":{"categories":{"items":{"properties":{"fill-color":{"type":"string"},"stroke-color":{"type":"string"},"stroke-width":{"type":"string"},"type":{"type":"string"},"width":{"type":"string"}},"type":"object"},"type":"array"}},"type":"object"}},"403":{"description":"Token required","schema":{"properties":{"error":{"example":"token required","type":"string"}},"type":"object"}}},"summary":"Get categories for layer's attribute","tags":["Layers"]}},"/api/layers/{lid}/export/geojson":{"post":{"parameters":[{"description":"Layer ID","in":"path","name":"lid","required":true,"type":"string"},{"in":"body","name":"body","required":false,"schema":{"properties":{"filter_ids":{"items":{"description":"Feature ID","type":"integer"},"type":"array"}},"type":"object"}},{"description":"Token","in":"query","name":"token","required":false,"type":"string"}],"produces":["text/plain"],"responses":{"200":{"description":"File"},"403":{"description":"Token required","schema":{"properties":{"error":{"example":"token required","type":"string"}},"type":"object"}}},"summary":"Export to GeoJSON","tags":["Export"]}},"/api/layers/{lid}/features":{"post":{"parameters":[{"description":"Layer ID","in":"path","name":"lid","required":true,"type":"string"},{"in":"body","name":"body","required":true,"schema":{"properties":{"geometry":{"required":true,"type":"object"},"properties":{"required":true,"type":"object"},"type":{"example":"Feature","required":true,"type":"string"}},"type":"object"}},{"description":"Token","in":"query","name":"token","required":false,"type":"string"}],"produces":["application/json"],"responses":{"200":{"description":"GeoJSON","schema":{"properties":{"geometry":{"type":"object"},"properties":{"type":"object"},"type":{"example":"Feature","type":"string"}},"type":"object"}},"403":{"description":"Token required","schema":{"properties":{"error":{"example":"token required","type":"string"}},"type":"object"}}},"summary":"Add feature","tags":["Features"]}},"/api/layers/{lid}/features/{fid}":{"delete":{"parameters":[{"description":"Layer ID","in":"path","name":"lid","required":true,"type":"string"},{"description":"Feature ID","in":"path","name":"fid","required":true,"type":"string"},{"description":"Token","in":"query","name":"token","required":false,"type":"string"}],"produces":["application/json"],"responses":{"200":{"description":"GeoJSON","schema":{"properties":{"geometry":{"type":"object"},"properties":{"type":"object"},"type":{"example":"Feature","type":"string"}},"type":"object"}},"403":{"description":"Token required","schema":{"properties":{"error":{"example":"token required","type":"string"}},"type":"object"}}},"summary":"Delete feature","tags":["Features"]},"get":{"parameters":[{"description":"Layer ID","in":"path","name":"lid","required":true,"type":"string"},{"description":"Feature ID","in":"path","name":"fid","required":true,"type":"string"},{"description":"Token","in":"query","name":"token","required":false,"type":"string"}],"produces":["application/json"],"responses":{"200":{"description":"GeoJSON","schema":{"properties":{"geometry":{"type":"object"},"properties":{"type":"object"},"type":{"example":"Feature","type":"string"}},"type":"object"}},"403":{"description":"Token required","schema":{"properties":{"error":{"example":"token required","type":"string"}},"type":"object"}}},"summary":"Get feature","tags":["Features"]},"put":{"parameters":[{"description":"Layer ID","in":"path","name":"lid","required":true,"type":"string"},{"description":"Feature ID","in":"path","name":"fid","required":true,"type":"string"},{"in":"body","name":"body","required":true,"schema":{"properties":{"geometry":{"required":true,"type":"object"},"properties":{"required":true,"type":"object"},"type":{"example":"Feature","required":true,"type":"string"}},"type":"object"}},{"description":"Token","in":"query","name":"token","required":false,"type":"string"}],"produces":["application/json"],"responses":{"200":{"description":"GeoJSON","schema":{"properties":{"geometry":{"type":"object"},"properties":{"type":"object"},"type":{"example":"Feature","type":"string"}},"type":"object"}},"403":{"description":"Token required","schema":{"properties":{"error":{"example":"token required","type":"string"}},"type":"object"}}},"summary":"Edit feature","tags":["Features"]}},"/api/layers/{lid}/features/{fid}/attachments":{"get":{"parameters":[{"description":"Layer ID","in":"path","name":"lid","required":true,"type":"string"},{"description":"Feature ID","in":"path","name":"fid","required":true,"type":"string"},{"description":"Token","in":"query","name":"token","required":false,"type":"string"}],"produces":["application/json"],"responses":{"200":{"schema":{"properties":{"attachments":{"properties":{"default":{"type":"object"},"public":{"type":"object"}},"type":"object"}},"type":"object"}},"403":{"description":"Token required","schema":{"properties":{"error":{"example":"token required","type":"string"}},"type":"object"}}},"summary":"Get attachments","tags":["Attachments"]},"post":{"parameters":[{"description":"Layer ID","in":"path","name":"lid","required":true,"type":"string"},{"description":"Feature ID","in":"path","name":"fid","required":true,"type":"string"},{"in":"body","name":"body","required":true,"schema":{"properties":{"link":{"required":true,"type":"string"},"name":{"required":true,"type":"string"},"public":{"required":false,"type":"boolean"}},"type":"object"}},{"description":"Token","in":"query","name":"token","required":false,"type":"string"}],"produces":["application/json"],"responses":{"200":{"description":"GeoJSON","schema":{"properties":{"id":{"type":"integer"}},"type":"object"}},"403":{"description":"Token required","schema":{"properties":{"error":{"example":"token required","type":"string"}},"type":"object"}}},"summary":"Add attachment to feature","tags":["Attachments"]}},"/api/layers/{lid}/features/{fid}/attachments/{aid}":{"delete":{"parameters":[{"description":"Layer ID","in":"path","name":"lid","required":true,"type":"string"},{"description":"Feature ID","in":"path","name":"fid","required":true,"type":"string"},{"description":"Attachment ID","in":"path","name":"aid","required":true,"type":"integer"},{"description":"Token","in":"query","name":"token","required":false,"type":"string"}],"produces":["application/json"],"responses":{"200":{"schema":{"properties":{"aid":{"type":"string"}},"type":"object"}},"403":{"description":"Token required","schema":{"properties":{"error":{"example":"token required","type":"string"}},"type":"object"}}},"summary":"Delete attachment","tags":["Attachments"]}},"/api/layers/{lid}/settings":{"delete":{"parameters":[{"description":"Layer ID","in":"path","name":"lid","required":true,"type":"string"},{"in":"body","name":"body","required":true,"schema":{"properties":{"column_name":{"example":"test","required":true,"type":"string"}},"type":"object"}},{"description":"Token","in":"query","name":"token","required":false,"type":"string"}],"produces":["application/json"],"responses":{"200":{"description":"GeoJSON","schema":{"properties":{"layers":{"properties":{"features":{"description":"Number of features","type":"integer"},"id":{"description":"Layer ID","type":"string"},"name":{"description":"Layer name","type":"string"}},"type":"object"}},"type":"object"}},"403":{"description":"Token required","schema":{"properties":{"error":{"example":"token required","type":"string"}},"type":"object"}}},"summary":"Delete column","tags":["Layers"]},"get":{"parameters":[{"description":"Layer ID","in":"path","name":"lid","required":true,"type":"string"},{"description":"Token","in":"query","name":"token","required":false,"type":"string"}],"produces":["application/json"],"responses":{"200":{"schema":{"properties":{"columns":{"type":"object"},"id":{"type":"string"},"name":{"type":"object"}},"type":"object"}},"403":{"description":"Token required","schema":{"properties":{"error":{"example":"token required","type":"string"}},"type":"object"}}},"summary":"Get settings","tags":["Layers"]},"post":{"parameters":[{"description":"Layer ID","in":"path","name":"lid","required":true,"type":"string"},{"in":"body","name":"body","required":true,"schema":{"properties":{"column_name":{"example":"test","required":false,"type":"string"},"column_type":{"required":false,"type":"string"},"layer_name":{"required":false,"type":"string"}},"type":"object"}},{"description":"Token","in":"query","name":"token","required":false,"type":"string"}],"produces":["application/json"],"responses":{"200":{"description":"GeoJSON","schema":{"properties":{"columns":{"type":"array"},"id":{"type":"string"},"name":{"type":"object"}},"type":"object"}},"403":{"description":"Token required","schema":{"properties":{"error":{"example":"token required","type":"string"}},"type":"object"}}},"summary":"Add column","tags":["Layers"]}},"/api/layers/{lid}/style":{"get":{"parameters":[{"description":"Layer ID","in":"path","name":"lid","required":true,"type":"string"},{"description":"Token","in":"query","name":"token","required":false,"type":"string"}],"produces":["application/json"],"responses":{"200":{"schema":{"properties":{"style":{"properties":{"fill-color":{"type":"string"},"stroke-color":{"type":"string"},"stroke-width":{"type":"string"}},"type":"object"}},"type":"object"}},"403":{"description":"Token required","schema":{"properties":{"error":{"example":"token required","type":"string"}},"type":"object"}}},"summary":"Get style","tags":["Layers"]},"put":{"parameters":[{"description":"Layer ID","in":"path","name":"lid","required":true,"type":"string"},{"in":"body","name":"body","required":true,"schema":{"properties":{"fill-color":{"required":false,"type":"string"},"labels":{"items":{"description":"Column name","type":"string"},"type":"array"},"stroke-color":{"required":false,"type":"string"},"stroke-width":{"required":false,"type":"string"}},"type":"object"}},{"description":"Token","in":"query","name":"token","required":false,"type":"string"}],"produces":["application/json"],"responses":{"200":{"description":"Style","schema":{"properties":{"style":{"properties":{"fill-color":{"type":"string"},"stroke-color":{"type":"string"},"stroke-width":{"type":"string"}},"type":"object"}},"type":"object"}},"403":{"description":"Token required","schema":{"properties":{"error":{"example":"token required","type":"string"}},"type":"object"}}},"summary":"Edit style","tags":["Layers"]}},"/api/login":{"post":{"parameters":[{"in":"body","name":"body","required":true,"schema":{"properties":{"password":{"description":"User password","example":"test","required":true,"type":"string"},"user":{"description":"User login","example":"test","required":true,"type":"string"}},"type":"object"}}],"produces":["application/json"],"responses":{"200":{"description":"Token","schema":{"properties":{"token":{"description":"User token","type":"string"}},"type":"object"}},"403":{"description":"Invalid credentials","schema":{"properties":{"error":{"example":"invalid credentials","type":"string"}},"type":"object"}}},"summary":"Login","tags":["Auth"]}},"/api/logo":{"get":{"produces":["image/png"],"responses":{"200":{"description":"Logo"}},"summary":"Get users","tags":["Logo"]},"post":{"parameters":[{"description":"Layer file","in":"formData","name":"file","required":true,"type":"file"},{"description":"Token","in":"query","name":"token","required":false,"type":"string"}],"produces":["application/png"],"responses":{"201":{"description":"New logo"}},"summary":"Edit logo","tags":["Logo"]}},"/api/permissions":{"get":{"parameters":[{"description":"Token","in":"query","name":"token","required":false,"type":"string"}],"produces":["application/json"],"responses":{"200":{"description":"GeoJSON","schema":{"properties":{"permissions":{"items":{"properties":{"id":{"description":"Layer ID","type":"string"},"name":{"description":"Layer name","type":"string"},"users":{"description":"For every user all layers and permissions","type":"object"}},"type":"object"},"type":"array"}},"type":"object"}},"403":{"description":"Token required","schema":{"properties":{"error":{"example":"token required","type":"string"}},"type":"object"}}},"summary":"Get permissions","tags":["Permissions"]}},"/api/permissions/{lid}":{"put":{"parameters":[{"description":"Layer ID","in":"path","name":"lid","required":true,"type":"string"},{"in":"body","name":"body","required":true,"schema":{"properties":{"permission":{"enum":["","read","write"],"example":"read","required":true,"type":"string"},"user":{"example":"test","required":true,"type":"string"}},"type":"object"}},{"description":"Token","in":"query","name":"token","required":false,"type":"string"}],"produces":["application/json"],"responses":{"200":{"description":"GeoJSON","schema":{"properties":{"permissions":{"properties":{"properties":{"permission":{"example":"read","type":"string"},"user":{"example":"test","type":"string"}},"type":"object"},"type":"object"},"type":{"example":"FeatureCollection","type":"string"}},"type":"object"}},"400":{"description":"User/Permission invalid","schema":{"properties":{"error":{"example":"permission invalid","type":"string"}},"type":"object"}},"403":{"description":"Token required","schema":{"properties":{"error":{"example":"token required","type":"string"}},"type":"object"}}},"summary":"Edit permissions","tags":["Permissions"]}},"/api/services":{"get":{"parameters":[{"description":"Token","in":"query","name":"token","required":false,"type":"string"}],"produces":["application/json"],"responses":{"200":{"schema":{"properties":{"services":{"items":{"properties":{"group":{"type":"string"},"id":{"type":"string"},"layers":{"type":"string"},"name":{"type":"string"},"url":{"type":"string"}},"type":"object"},"type":"array"}},"type":"object"}},"403":{"description":"Token required","schema":{"properties":{"error":{"example":"token required","type":"string"}},"type":"object"}}},"summary":"Get services","tags":["Services"]},"post":{"parameters":[{"in":"body","name":"body","required":true,"schema":{"properties":{"layers":{"required":true,"type":"string"},"name":{"required":true,"type":"string"},"public":{"required":false,"type":"boolean"},"url":{"required":true,"type":"string"}},"type":"object"}},{"description":"Token","in":"query","name":"token","required":false,"type":"string"}],"produces":["application/json"],"responses":{"200":{"description":"Service","schema":{"properties":{"group":{"type":"string"},"id":{"type":"string"},"layers":{"type":"string"},"name":{"type":"string"},"url":{"type":"string"}},"type":"object"}},"403":{"description":"Token required","schema":{"properties":{"error":{"example":"token required","type":"string"}},"type":"object"}}},"summary":"Add new service","tags":["Attachments"]}},"/api/services/{sid}":{"delete":{"parameters":[{"description":"Service ID","in":"path","name":"sid","required":true,"type":"string"},{"description":"Token","in":"query","name":"token","required":false,"type":"string"}],"produces":["application/json"],"responses":{"200":{"schema":{"properties":{"aid":{"type":"string"}},"type":"object"}},"403":{"description":"Token required","schema":{"properties":{"error":{"example":"token required","type":"string"}},"type":"object"}}},"summary":"Delete service","tags":["Services"]}},"/api/users":{"delete":{"parameters":[{"in":"body","name":"body","required":true,"schema":{"properties":{"user":{"description":"User login","example":"test","required":true,"type":"string"}},"type":"object"}}],"produces":["application/json"],"responses":{"200":{"description":"Confirmation","schema":{"properties":{"users":{"example":"user deleted","type":"string"}},"type":"object"}}},"summary":"Delete user","tags":["Auth"]},"get":{"parameters":[{"description":"Token","in":"query","name":"token","required":false,"type":"string"}],"produces":["application/json"],"responses":{"200":{"description":"Token","schema":{"properties":{"users":{"properties":{"user":{"example":"group","type":"string"}},"type":"object"}},"type":"object"}},"403":{"description":"Token required","schema":{"properties":{"error":{"example":"invalid token","type":"string"}},"type":"object"}}},"summary":"Get users","tags":["Auth"]},"post":{"parameters":[{"in":"body","name":"body","required":true,"schema":{"properties":{"group":{"description":"User group","example":"default","required":false,"type":"string"},"password":{"description":"User password","example":"test","required":true,"type":"string"},"user":{"description":"User login","example":"test","required":true,"type":"string"}},"type":"object"}}],"produces":["application/json"],"responses":{"201":{"description":"Confirmation","schema":{"properties":{"users":{"example":"user created","type":"string"}},"type":"object"}},"409":{"description":"User exists","schema":{"properties":{"error":{"example":"user exists","type":"string"}},"type":"object"}}},"summary":"Add new user","tags":["Auth"]},"put":{"parameters":[{"in":"body","name":"body","required":true,"schema":{"properties":{"group":{"description":"User group","example":"default","required":true,"type":"string"},"user":{"description":"User login","example":"test","required":true,"type":"string"}},"type":"object"}}],"produces":["application/json"],"responses":{"200":{"description":"Confirmation","schema":{"properties":{"users":{"example":"user assigned","type":"string"}},"type":"object"}},"409":{"description":"User/Group exists","schema":{"properties":{"error":{"example":"user/group not exists","type":"string"}},"type":"object"}}},"summary":"Assign user to group","tags":["Auth"]}},"/api/users/groups":{"delete":{"parameters":[{"in":"body","name":"body","required":true,"schema":{"properties":{"group":{"description":"Group name","example":"test","required":true,"type":"string"}},"type":"object"}}],"produces":["application/json"],"responses":{"200":{"description":"Success","schema":{"properties":{"group":{"description":"Group deleted","type":"string"}},"type":"object"}},"400":{"description":"Group not exists","schema":{"properties":{"error":{"description":"Group not exists","type":"string"}},"type":"object"}},"403":{"description":"Invalid credentials","schema":{"properties":{"error":{"example":"invalid credentials","type":"string"}},"type":"object"}}},"summary":"Delete group","tags":["Auth"]},"get":{"parameters":[{"description":"Token","in":"query","name":"token","required":false,"type":"string"}],"produces":["application/json"],"responses":{"200":{"description":"Token","schema":{"properties":{"groups":{"items":{"type":"string"},"type":"array"}},"type":"object"}},"403":{"description":"Token required","schema":{"properties":{"error":{"example":"invalid token","type":"string"}},"type":"object"}}},"summary":"Get groups","tags":["Auth"]},"post":{"parameters":[{"in":"body","name":"body","required":true,"schema":{"properties":{"group":{"description":"Group name","example":"test","required":true,"type":"string"}},"type":"object"}}],"produces":["application/json"],"responses":{"201":{"description":"Success","schema":{"properties":{"group":{"description":"New group added","type":"string"}},"type":"object"}},"400":{"description":"Group exists","schema":{"properties":{"error":{"description":"Group exists","type":"string"}},"type":"object"}},"403":{"description":"Invalid credentials","schema":{"properties":{"error":{"example":"invalid credentials","type":"string"}},"type":"object"}}},"summary":"Add new group","tags":["Auth"]}}},"schemes":["http","https"],"swagger":"2.0"}
