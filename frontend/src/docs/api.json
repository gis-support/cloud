{"basePath":"/","definitions":{"AttachmentMetadata":{"properties":{"added_at":{"description":"Date of upload","example":"Thu, 18 Jun 2020 13:55:52 GMT","type":"string"},"added_by":{"description":"Name of user who uploaded the file","example":"admin","type":"string"},"attachment_id":{"description":"ID of created attachment","example":1,"type":"integer"},"file_name":{"description":"Name of the file","example":"file_name.txt","type":"string"}},"type":"object"},"AttachmentUpload":{"properties":{"content":{"description":"Base64 encoded file content","example":"base64","type":"string"},"name":{"description":"Name of the file","example":"file_name.txt","type":"string"}},"type":"object"},"AttachmentsUploadResult":{"properties":{"attachment_id":{"description":"ID of created attachment","example":1,"type":"integer"},"original_file_name":{"description":"Name of the uploaded file","example":"file_name.txt","type":"string"},"saved_as":{"description":"Name under which the file was saved. File names in API must be unique, so suffix may be necessary","example":"file_name_1.txt","type":"string"}},"type":"object"},"Dictionary":{"properties":{"column_name":{"example":"name of the column","type":"string"},"values":{"example":["value 1","value 2"],"type":"array"}},"type":"object"},"LayerTagGet":{"properties":{"color":{"description":"Color of the tag","example":"color"},"id":{"description":"ID of the tag","example":1},"name":{"description":"Name of the tag","example":"name"}},"type":"object"},"ProjectGet":{"properties":{"active_layer_id":{"example":"6On03GwRvYx77Xr9NRb2JMrxjrbe2gQ1M38Xok"},"additional_layers_ids":{"example":["RPVbnD55NxqMEb12k43bN0vQjRyk","2Ay1xG6Y6Y6LrNyJM3LjVnVyKeNMp"],"type":"array"},"id":{"description":"ID of the project","example":1},"map_center":{"properties":{"coordinates":{"example":[21,52]},"type":{"example":"Point"}},"type":"object"},"map_zoom":{"example":1},"name":{"description":"Name of the project","example":"name"},"permission_to_active_layer":{"description":"Does user have permission to project`s active layer","example":true},"permission_to_each_additional_layer":{"description":"Does user have permission to project`s each additional layer","example":true},"service_layers_ids":{"example":[1,2],"type":"array"}},"type":"object"}},"host":"cloud.gis.support","info":{"contact":{"email":"","responsibleDeveloper":"","responsibleOrganization":"","url":""},"description":"","termsOfService":"","title":"Cloud","version":"0.1"},"operationId":"getmyData","paths":{"/api/analysis/distance/{lid}/{fid}":{"post":{"parameters":[{"description":"Layer ID","in":"path","name":"lid","required":true,"type":"string"},{"description":"Feature ID","in":"path","name":"fid","required":true,"type":"string"},{"in":"body","name":"body","required":true,"schema":{"properties":{"buffer":{"required":true,"type":"number"},"name":{"required":true,"type":"string"}},"type":"object"}},{"description":"Token","in":"query","name":"token","required":false,"type":"string"}],"produces":["application/json"],"responses":{"200":{"description":"Analysis result","schema":{"properties":{"pk":{"items":{"properties":{"distance":{"type":"number"},"name":{"type":"string"}},"type":"object"},"type":"array"},"pn":{"items":{"properties":{"distance":{"type":"number"},"name":{"type":"string"}},"type":"object"},"type":"array"}},"type":"object"}},"403":{"description":"Token required","schema":{"properties":{"error":{"example":"token required","type":"string"}},"type":"object"}}},"summary":"Distance analysis","tags":["Analysis"]}},"/api/analysis/distance/{lid}/{fid}/xlsx":{"post":{"parameters":[{"description":"Layer ID","in":"path","name":"lid","required":true,"type":"string"},{"description":"Feature ID","in":"path","name":"fid","required":true,"type":"string"},{"in":"body","name":"body","required":true,"schema":{"properties":{"buffer":{"required":true,"type":"number"},"name":{"required":true,"type":"string"}},"type":"object"}},{"description":"Token","in":"query","name":"token","required":false,"type":"string"}],"produces":["application/json"],"responses":{"200":{"description":".xlsx file"},"403":{"description":"Token required","schema":{"properties":{"error":{"example":"token required","type":"string"}},"type":"object"}}},"summary":"Distance analysis","tags":["Analysis"]}},"/api/analysis/intersection/{lid}":{"post":{"parameters":[{"description":"Layer ID","in":"path","name":"lid","required":true,"type":"string"},{"in":"body","name":"body","required":true,"schema":{"properties":{"geometry":{"properties":{"coordinates":{"example":[[[14.1228848600001,49.002046518],[14.1228848600001,54.836416667],[24.1457830750001,54.836416667],[24.1457830750001,49.002046518],[14.1228848600001,49.002046518]]],"type":"array"},"type":{"example":"Polygon"}},"type":"object"}},"type":"object"}},{"description":"`xlsx` - return features as Excel Spreadsheet, `json` - return features as JSON","example":"json","in":"query","name":"response_type","required":true,"schema":null,"type":"string"},{"description":"Token","in":"query","name":"token","required":false,"type":"string"}],"produces":["application/json"],"responses":{"200":{"description":"OK"},"403":{"description":"Token required","schema":{"properties":{"error":{"example":"token required","type":"string"}},"type":"object"}}},"summary":"Distance analysis","tags":["Analysis"]}},"/api/analysis/settings":{"get":{"parameters":[{"description":"Token","in":"query","name":"token","required":false,"type":"string"}],"produces":["application/json"],"responses":{"200":{"schema":{"properties":{"settings":{"properties":{"pk":{"type":"string"},"pn":{"type":"string"}},"type":"object"}},"type":"object"}},"403":{"description":"Token required","schema":{"properties":{"error":{"example":"token required","type":"string"}},"type":"object"}}},"summary":"Get settings","tags":["Analysis"]},"put":{"parameters":[{"in":"body","name":"body","required":true,"schema":{"properties":{"pk":{"required":false,"type":"string"},"pn":{"required":false,"type":"string"}},"type":"object"}},{"description":"Token","in":"query","name":"token","required":false,"type":"string"}],"produces":["application/json"],"responses":{"200":{"description":"GeoJSON","schema":{"properties":{"id":{"type":"integer"}},"type":"object"}},"403":{"description":"Token required","schema":{"properties":{"error":{"example":"token required","type":"string"}},"type":"object"}}},"summary":"Set settings","tags":["Analysis"]}},"/api/attachments_qgis":{"delete":{"description":"Allows to remove file from a feature immediately.<br/>","parameters":[{"description":"Token","in":"query","name":"token","required":false,"type":"string"},{"description":"IDs of attachments as comma-separated list. At least one is required","example":"1,2,3","in":"query","name":"ids","required":true,"type":"string"},{"description":"ID of feature from which file should be removed","in":"query","name":"feature_id","required":false,"type":"string"},{"description":"ID of layer containing `feature_id`","in":"query","name":"layer_id","required":false,"type":"string"}],"produces":["application/json"],"responses":{"204":{"description":"OK"},"403":{"description":"Token required","schema":{"properties":{"error":{"example":"token required","type":"string"}},"type":"object"}}},"summary":"Delete attachments.","tags":["QGIS Attachments"]},"post":{"description":"Allows to attach file to a feature immediately.<br/>","parameters":[{"description":"Token","in":"query","name":"token","required":false,"type":"string"},{"description":"ID of feature to which uploaded file should be attached","in":"query","name":"feature_id","required":false,"type":"string"},{"description":"ID of layer containing `feature_id`","in":"query","name":"layer_id","required":false,"type":"string"},{"description":"Files","in":"body","name":"body","required":true,"schema":{"properties":{"data":{"items":{"oneOf":[{"$ref":"#/definitions/AttachmentUpload"}]},"type":"array"}},"type":"object"}}],"produces":["application/json"],"responses":{"201":{"description":"OK","schema":{"properties":{"data":{"items":{"oneOf":[{"$ref":"#/definitions/AttachmentsUploadResult"}]},"type":"array"}},"type":"object"}},"403":{"description":"Token required","schema":{"properties":{"error":{"example":"token required","type":"string"}},"type":"object"}}},"summary":"Upload attachments","tags":["QGIS Attachments"]}},"/api/attachments_qgis/files":{"get":{"parameters":[{"description":"Token","in":"query","name":"token","required":false,"type":"string"},{"description":"IDs of attachments as comma-separated list. At least one is required","example":"1,2,3","in":"query","name":"ids","required":true,"type":"string"}],"produces":["application/json"],"responses":{"200":{"description":"Downloads file if single ID was given, ZIP-archived files otherwise."},"403":{"description":"Token required","schema":{"properties":{"error":{"example":"token required","type":"string"}},"type":"object"}}},"summary":"Download attachments","tags":["QGIS Attachments"]}},"/api/attachments_qgis/metadata":{"get":{"parameters":[{"description":"Token","in":"query","name":"token","required":false,"type":"string"},{"description":"IDs of attachments as comma-separated list","example":"1,2,3","in":"query","name":"ids","required":false,"type":"string"}],"produces":["application/json"],"responses":{"200":{"description":"OK","schema":{"properties":{"data":{"items":{"oneOf":[{"$ref":"#/definitions/AttachmentMetadata"}]},"type":"array"}},"type":"object"}},"403":{"description":"Token required","schema":{"properties":{"error":{"example":"token required","type":"string"}},"type":"object"}}},"summary":"Download attachments metadata","tags":["QGIS Attachments"]}},"/api/check_token":{"get":{"parameters":[{"description":"Token","in":"query","name":"token","required":false,"type":"string"}],"produces":["application/json"],"responses":{"200":{"description":"Token","schema":{"properties":{"token":{"description":"Valid","type":"string"}},"type":"object"}},"403":{"description":"Token required","schema":{"properties":{"error":{"example":"invalid token","type":"string"}},"type":"object"}}},"summary":"Check token","tags":["Auth"]}},"/api/favicon":{"get":{"produces":["image/vnd.microsoft.icon"],"responses":{"200":{"description":"Favicon file"}},"summary":"Get favicon","tags":["Favicon"]},"post":{"parameters":[{"description":"Favicon file","in":"formData","name":"file","required":true,"type":"file"},{"description":"Token","in":"query","name":"token","required":false,"type":"string"}],"produces":["image/vnd.microsoft.icon"],"responses":{"201":{"description":"New favicon file"},"403":{"description":"Invalid token","schema":{"properties":{"error":{"example":"invalid token","type":"string"}},"type":"object"}}},"summary":"Upload favicon","tags":["Favicon"]}},"/api/layers":{"get":{"parameters":[{"description":"Token","in":"query","name":"token","required":false,"type":"string"}],"produces":["application/json"],"responses":{"200":{"description":"Layers","schema":{"properties":{"layers":{"items":{"properties":{"id":{"description":"Layer ID","type":"string"},"name":{"description":"Layer name","type":"string"}},"type":"object"},"type":"array"}},"type":"object"}},"403":{"description":"Token required","schema":{"properties":{"error":{"example":"token required","type":"string"}},"type":"object"}}},"summary":"Get layers","tags":["Layers"]},"post":{"parameters":[{"description":"Layer file","in":"formData","name":"file","required":true,"type":"file"},{"description":"Layer name","example":"test","in":"formData","name":"name","required":true,"type":"string"},{"description":"Encoding","example":"cp1250","in":"formData","name":"encoding","required":false,"type":"string"},{"description":"EPSG number, 4326 default","example":"4326","in":"formData","name":"epsg","required":false,"type":"string"},{"description":"Token","in":"query","name":"token","required":false,"type":"string"}],"produces":["application/json"],"responses":{"201":{"description":"Confirmation","schema":{"properties":{"layers":{"properties":{"features":{"description":"Number of features","type":"integer"},"id":{"description":"Layer ID","type":"string"},"name":{"description":"Layer name","type":"string"}},"type":"object"}},"type":"object"}},"401":{"description":"File is (required/invalid) / Name is required / Layer already exists","schema":{"properties":{"error":{"example":"file is required","type":"string"}},"type":"object"}},"403":{"description":"Token required","schema":{"properties":{"error":{"example":"token required","type":"string"}},"type":"object"}}},"summary":"Add layer","tags":["Layers"]}},"/api/layers/max_name_length":{"get":{"parameters":[{"description":"Token","in":"query","name":"token","required":false,"type":"string"}],"produces":["application/json"],"responses":{"200":{"schema":{"properties":{"data":{"example":60}},"type":"object"}},"403":{"description":"Token required","schema":{"properties":{"error":{"example":"token required","type":"string"}},"type":"object"}}},"summary":"Get maximum length of layers name","tags":["Layers"]}},"/api/layers/{lid}":{"delete":{"parameters":[{"description":"Layer ID","in":"path","name":"lid","required":true,"type":"string"},{"description":"Token","in":"query","name":"token","required":false,"type":"string"}],"produces":["application/json"],"responses":{"200":{"description":"Confirmation","schema":{"properties":{"layers":{"example":"layer deleted","type":"string"}},"type":"object"}},"403":{"description":"Token required","schema":{"properties":{"error":{"example":"token required","type":"string"}},"type":"object"}}},"summary":"Delete layer","tags":["Layers"]},"get":{"parameters":[{"description":"Layer ID","in":"path","name":"lid","required":true,"type":"string"},{"description":"Token","in":"query","name":"token","required":false,"type":"string"}],"produces":["application/json"],"responses":{"200":{"description":"GeoJSON","schema":{"properties":{"features":{"items":{"properties":{"geometry":{"type":"object"},"properties":{"type":"object"},"type":{"example":"Feature","type":"string"}},"type":"object"},"type":"array"},"type":{"example":"FeatureCollection","type":"string"}},"type":"object"}},"403":{"description":"Token required","schema":{"properties":{"error":{"example":"token required","type":"string"}},"type":"object"}}},"summary":"Get layer","tags":["Layers"]}},"/api/layers/{lid}/categories/{attr}":{"get":{"parameters":[{"description":"Layer ID","in":"path","name":"lid","required":true,"type":"string"},{"description":"Layer attribute","in":"path","name":"attr","required":true,"type":"string"},{"description":"Token","in":"query","name":"token","required":false,"type":"string"}],"produces":["application/json"],"responses":{"200":{"schema":{"properties":{"categories":{"items":{"properties":{"fill-color":{"type":"string"},"stroke-color":{"type":"string"},"stroke-width":{"type":"string"},"type":{"type":"string"},"width":{"type":"string"}},"type":"object"},"type":"array"}},"type":"object"}},"403":{"description":"Token required","schema":{"properties":{"error":{"example":"token required","type":"string"}},"type":"object"}}},"summary":"Get categories for layer's attribute","tags":["Layers"]}},"/api/layers/{lid}/export/geojson":{"post":{"parameters":[{"description":"Layer ID","in":"path","name":"lid","required":true,"type":"string"},{"in":"body","name":"body","required":false,"schema":{"properties":{"filter_ids":{"items":{"description":"Feature ID","type":"integer"},"type":"array"}},"type":"object"}},{"description":"Token","in":"query","name":"token","required":false,"type":"string"}],"produces":["text/plain"],"responses":{"200":{"description":"File"},"403":{"description":"Token required","schema":{"properties":{"error":{"example":"token required","type":"string"}},"type":"object"}}},"summary":"Export to GeoJSON","tags":["Export"]}},"/api/layers/{lid}/features":{"post":{"parameters":[{"description":"Layer ID","in":"path","name":"lid","required":true,"type":"string"},{"in":"body","name":"body","required":true,"schema":{"properties":{"geometry":{"required":true,"type":"object"},"properties":{"required":true,"type":"object"},"type":{"example":"Feature","required":true,"type":"string"}},"type":"object"}},{"description":"Token","in":"query","name":"token","required":false,"type":"string"}],"produces":["application/json"],"responses":{"200":{"description":"GeoJSON","schema":{"properties":{"geometry":{"type":"object"},"properties":{"type":"object"},"type":{"example":"Feature","type":"string"}},"type":"object"}},"403":{"description":"Token required","schema":{"properties":{"error":{"example":"token required","type":"string"}},"type":"object"}}},"summary":"Add feature","tags":["Features"]}},"/api/layers/{lid}/features/{fid}":{"delete":{"parameters":[{"description":"Layer ID","in":"path","name":"lid","required":true,"type":"string"},{"description":"Feature ID","in":"path","name":"fid","required":true,"type":"string"},{"description":"Token","in":"query","name":"token","required":false,"type":"string"}],"produces":["application/json"],"responses":{"200":{"description":"GeoJSON","schema":{"properties":{"geometry":{"type":"object"},"properties":{"type":"object"},"type":{"example":"Feature","type":"string"}},"type":"object"}},"403":{"description":"Token required","schema":{"properties":{"error":{"example":"token required","type":"string"}},"type":"object"}}},"summary":"Delete feature","tags":["Features"]},"get":{"parameters":[{"description":"Layer ID","in":"path","name":"lid","required":true,"type":"string"},{"description":"Feature ID","in":"path","name":"fid","required":true,"type":"string"},{"description":"Token","in":"query","name":"token","required":false,"type":"string"}],"produces":["application/json"],"responses":{"200":{"description":"GeoJSON","schema":{"properties":{"geometry":{"type":"object"},"properties":{"type":"object"},"type":{"example":"Feature","type":"string"}},"type":"object"}},"403":{"description":"Token required","schema":{"properties":{"error":{"example":"token required","type":"string"}},"type":"object"}}},"summary":"Get feature","tags":["Features"]},"put":{"parameters":[{"description":"Layer ID","in":"path","name":"lid","required":true,"type":"string"},{"description":"Feature ID","in":"path","name":"fid","required":true,"type":"string"},{"in":"body","name":"body","required":true,"schema":{"properties":{"geometry":{"required":true,"type":"object"},"properties":{"required":true,"type":"object"},"type":{"example":"Feature","required":true,"type":"string"}},"type":"object"}},{"description":"Token","in":"query","name":"token","required":false,"type":"string"}],"produces":["application/json"],"responses":{"200":{"description":"GeoJSON","schema":{"properties":{"geometry":{"type":"object"},"properties":{"type":"object"},"type":{"example":"Feature","type":"string"}},"type":"object"}},"403":{"description":"Token required","schema":{"properties":{"error":{"example":"token required","type":"string"}},"type":"object"}}},"summary":"Edit feature","tags":["Features"]}},"/api/layers/{lid}/features/{fid}/attachments":{"get":{"parameters":[{"description":"Layer ID","in":"path","name":"lid","required":true,"type":"string"},{"description":"Feature ID","in":"path","name":"fid","required":true,"type":"string"},{"description":"Token","in":"query","name":"token","required":false,"type":"string"}],"produces":["application/json"],"responses":{"200":{"schema":{"properties":{"attachments":{"properties":{"default":{"type":"object"},"public":{"type":"object"}},"type":"object"}},"type":"object"}},"403":{"description":"Token required","schema":{"properties":{"error":{"example":"token required","type":"string"}},"type":"object"}}},"summary":"Get attachments","tags":["Attachments"]},"post":{"parameters":[{"description":"Layer ID","in":"path","name":"lid","required":true,"type":"string"},{"description":"Feature ID","in":"path","name":"fid","required":true,"type":"string"},{"in":"body","name":"body","required":true,"schema":{"properties":{"link":{"required":true,"type":"string"},"name":{"required":true,"type":"string"},"public":{"required":false,"type":"boolean"}},"type":"object"}},{"description":"Token","in":"query","name":"token","required":false,"type":"string"}],"produces":["application/json"],"responses":{"200":{"description":"GeoJSON","schema":{"properties":{"id":{"type":"integer"}},"type":"object"}},"403":{"description":"Token required","schema":{"properties":{"error":{"example":"token required","type":"string"}},"type":"object"}}},"summary":"Add attachment to feature","tags":["Attachments"]}},"/api/layers/{lid}/features/{fid}/attachments/{aid}":{"delete":{"parameters":[{"description":"Layer ID","in":"path","name":"lid","required":true,"type":"string"},{"description":"Feature ID","in":"path","name":"fid","required":true,"type":"string"},{"description":"Attachment ID","in":"path","name":"aid","required":true,"type":"integer"},{"description":"Token","in":"query","name":"token","required":false,"type":"string"}],"produces":["application/json"],"responses":{"200":{"schema":{"properties":{"aid":{"type":"string"}},"type":"object"}},"403":{"description":"Token required","schema":{"properties":{"error":{"example":"token required","type":"string"}},"type":"object"}}},"summary":"Delete attachment","tags":["Attachments"]}},"/api/layers/{lid}/settings":{"delete":{"parameters":[{"description":"Layer ID","in":"path","name":"lid","required":true,"type":"string"},{"in":"body","name":"body","required":true,"schema":{"properties":{"column_name":{"example":"test","required":true,"type":"string"}},"type":"object"}},{"description":"Token","in":"query","name":"token","required":false,"type":"string"}],"produces":["application/json"],"responses":{"200":{"description":"GeoJSON","schema":{"properties":{"layers":{"properties":{"features":{"description":"Number of features","type":"integer"},"id":{"description":"Layer ID","type":"string"},"name":{"description":"Layer name","type":"string"}},"type":"object"}},"type":"object"}},"403":{"description":"Token required","schema":{"properties":{"error":{"example":"token required","type":"string"}},"type":"object"}}},"summary":"Delete column","tags":["Layers"]},"get":{"parameters":[{"description":"Layer ID","in":"path","name":"lid","required":true,"type":"string"},{"description":"Token","in":"query","name":"token","required":false,"type":"string"}],"produces":["application/json"],"responses":{"200":{"schema":{"properties":{"bbox":{"type":"object"},"columns":{"type":"object"},"id":{"type":"string"},"name":{"type":"object"}},"type":"object"}},"403":{"description":"Token required","schema":{"properties":{"error":{"example":"token required","type":"string"}},"type":"object"}}},"summary":"Get settings","tags":["Layers"]},"post":{"parameters":[{"description":"Layer ID","in":"path","name":"lid","required":true,"type":"string"},{"in":"body","name":"body","required":true,"schema":{"properties":{"column_name":{"example":"test","required":false,"type":"string"},"column_type":{"required":false,"type":"string"},"layer_name":{"required":false,"type":"string"},"values":{"description":"List of values for a dictionary column (`column_type = dict`)","example":["value 1",2],"required":false,"type":"array"}},"type":"object"}},{"description":"Token","in":"query","name":"token","required":false,"type":"string"}],"produces":["application/json"],"responses":{"200":{"description":"GeoJSON","schema":{"properties":{"columns":{"type":"array"},"id":{"type":"string"},"name":{"type":"object"}},"type":"object"}},"403":{"description":"Token required","schema":{"properties":{"error":{"example":"token required","type":"string"}},"type":"object"}}},"summary":"Add column","tags":["Layers"]}},"/api/layers/{lid}/settings/dicts/values":{"get":{"parameters":[{"description":"Layer ID","in":"path","name":"lid","required":true,"type":"string"},{"description":"Token","in":"query","name":"token","required":false,"type":"string"}],"produces":["application/json"],"responses":{"200":{"schema":{"properties":{"data":{"items":{"oneOf":[{"$ref":"#/definitions/Dictionary"}]},"type":"array"}},"type":"object"}},"403":{"description":"Token required","schema":{"properties":{"error":{"example":"token required","type":"string"}},"type":"object"}}},"summary":"Get values of all dictionary-columns of a layer","tags":["Layers"]}},"/api/layers/{lid}/settings/dicts/{column_name}/values":{"get":{"parameters":[{"description":"Layer ID","in":"path","name":"lid","required":true,"type":"string"},{"description":"Name of the column","in":"path","name":"column_name","required":true,"type":"string"},{"description":"Token","in":"query","name":"token","required":false,"type":"string"}],"produces":["application/json"],"responses":{"200":{"schema":{"properties":{"data":{"items":{"oneOf":[{"$ref":"#/definitions/Dictionary"}]},"type":"array"}},"type":"object"}},"400":{"description":"Column does not exist or column is not a dictionary column"},"403":{"description":"Token required","schema":{"properties":{"error":{"example":"token required","type":"string"}},"type":"object"}}},"summary":"Get values of a dictionary-column of a layer","tags":["Layers"]},"put":{"parameters":[{"description":"Layer ID","in":"path","name":"lid","required":true,"type":"string"},{"description":"Name of the column","in":"path","name":"column_name","required":true,"type":"string"},{"description":"Token","in":"query","name":"token","required":false,"type":"string"},{"in":"body","name":"body","required":true,"schema":{"properties":{"data":{"description":"List of values for a dictionary column (`column_type = dict`)","example":["value 1",2],"required":false,"type":"array"}},"type":"object"}}],"produces":["application/json"],"responses":{"204":{"description":"OK"},"400":{"description":"Column does not exist or column is not a dictionary column"},"403":{"description":"Token required","schema":{"properties":{"error":{"example":"token required","type":"string"}},"type":"object"}}},"summary":"Replace values of a dictionary-column","tags":["Layers"]}},"/api/layers/{lid}/style":{"get":{"parameters":[{"description":"Layer ID","in":"path","name":"lid","required":true,"type":"string"},{"description":"Token","in":"query","name":"token","required":false,"type":"string"}],"produces":["application/json"],"responses":{"200":{"schema":{"properties":{"style":{"properties":{"fill-color":{"type":"string"},"stroke-color":{"type":"string"},"stroke-width":{"type":"string"}},"type":"object"}},"type":"object"}},"403":{"description":"Token required","schema":{"properties":{"error":{"example":"token required","type":"string"}},"type":"object"}}},"summary":"Get style","tags":["Layers"]},"put":{"parameters":[{"description":"Layer ID","in":"path","name":"lid","required":true,"type":"string"},{"in":"body","name":"body","required":true,"schema":{"properties":{"fill-color":{"required":false,"type":"string"},"labels":{"items":{"description":"Column name","type":"string"},"type":"array"},"stroke-color":{"required":false,"type":"string"},"stroke-width":{"required":false,"type":"string"}},"type":"object"}},{"description":"Token","in":"query","name":"token","required":false,"type":"string"}],"produces":["application/json"],"responses":{"200":{"description":"Style","schema":{"properties":{"style":{"properties":{"fill-color":{"type":"string"},"stroke-color":{"type":"string"},"stroke-width":{"type":"string"}},"type":"object"}},"type":"object"}},"403":{"description":"Token required","schema":{"properties":{"error":{"example":"token required","type":"string"}},"type":"object"}}},"summary":"Edit style","tags":["Layers"]}},"/api/login":{"post":{"parameters":[{"in":"body","name":"body","required":true,"schema":{"properties":{"password":{"description":"User password","example":"test","required":true,"type":"string"},"user":{"description":"User login","example":"test","required":true,"type":"string"}},"type":"object"}}],"produces":["application/json"],"responses":{"200":{"description":"Token","schema":{"properties":{"token":{"description":"User token","type":"string"}},"type":"object"}},"403":{"description":"Invalid credentials","schema":{"properties":{"error":{"example":"invalid credentials","type":"string"}},"type":"object"}}},"summary":"Login","tags":["Auth"]}},"/api/logo":{"get":{"produces":["image/png"],"responses":{"200":{"description":"Logo"}},"summary":"Get users","tags":["Logo"]},"post":{"parameters":[{"description":"Layer file","in":"formData","name":"file","required":true,"type":"file"},{"description":"Token","in":"query","name":"token","required":false,"type":"string"}],"produces":["application/png"],"responses":{"201":{"description":"New logo"}},"summary":"Edit logo","tags":["Logo"]}},"/api/permissions":{"get":{"parameters":[{"description":"Token","in":"query","name":"token","required":false,"type":"string"}],"produces":["application/json"],"responses":{"200":{"description":"GeoJSON","schema":{"properties":{"permissions":{"items":{"properties":{"id":{"description":"Layer ID","type":"string"},"name":{"description":"Layer name","type":"string"},"users":{"description":"For every user all layers and permissions","type":"object"}},"type":"object"},"type":"array"}},"type":"object"}},"403":{"description":"Token required","schema":{"properties":{"error":{"example":"token required","type":"string"}},"type":"object"}}},"summary":"Get permissions","tags":["Permissions"]}},"/api/permissions/{lid}":{"put":{"parameters":[{"description":"Layer ID","in":"path","name":"lid","required":true,"type":"string"},{"in":"body","name":"body","required":true,"schema":{"properties":{"permission":{"enum":["","read","write"],"example":"read","required":true,"type":"string"},"user":{"example":"test","required":true,"type":"string"}},"type":"object"}},{"description":"Token","in":"query","name":"token","required":false,"type":"string"}],"produces":["application/json"],"responses":{"200":{"description":"GeoJSON","schema":{"properties":{"permissions":{"properties":{"properties":{"permission":{"example":"read","type":"string"},"user":{"example":"test","type":"string"}},"type":"object"},"type":"object"},"type":{"example":"FeatureCollection","type":"string"}},"type":"object"}},"400":{"description":"User/Permission invalid","schema":{"properties":{"error":{"example":"permission invalid","type":"string"}},"type":"object"}},"403":{"description":"Token required","schema":{"properties":{"error":{"example":"token required","type":"string"}},"type":"object"}}},"summary":"Edit permissions","tags":["Permissions"]}},"/api/projects":{"get":{"parameters":[{"description":"Token","in":"query","name":"token","required":false,"type":"string"}],"produces":["application/json"],"responses":{"200":{"description":"OK","schema":{"properties":{"data":{"items":{"oneOf":[{"$ref":"#/definitions/ProjectGet"}]},"type":"array"}},"type":"object"}},"403":{"description":"token required","schema":{"properties":{"error":{"example":"token required","type":"string"}},"type":"object"}}},"summary":"Get all projects","tags":["Projects"]},"post":{"parameters":[{"in":"body","name":"body","required":true,"schema":{"properties":{"active_layer_id":{"example":"6On03GwRvYx77Xr9NRb2JMrxjrbe2gQ1M38Xok","required":true,"type":"string"},"additional_layers_ids":{"example":["Ybmjyo7NX5ybjmmwqYBNxe8qng9pV5NRB6g","7k207J4v3pKbbYrxBvMnOErKjrMLnAQgE78YqD"],"type":"array"},"map_center":{"properties":{"coordinates":{"example":[21,52]},"type":{"example":"Point"}},"required":true,"type":"object"},"map_zoom":{"example":1,"required":true},"name":{"description":"Name of the project","example":"name","required":true,"type":"string"},"service_layers_ids":{"example":[1,2],"type":"array"}},"type":"object"}},{"description":"Token","in":"query","name":"token","required":false,"type":"string"}],"produces":["application/json"],"responses":{"201":{"description":"OK","schema":{"properties":{"data":{"description":"ID of newly created project","example":1}},"type":"object"}},"400":{"description":"Request payload lacks obligatory data.","schema":{"properties":{"error":{"example":"message","type":"string"}},"type":"object"}},"403":{"description":"token required or permission denied to active/additional layer","schema":{"properties":{"error":{"example":"token required","type":"string"}},"type":"object"}}},"summary":"Create new project","tags":["Projects"]}},"/api/projects/{active_layer_id}/users":{"get":{"parameters":[{"description":"Token","in":"query","name":"token","required":false,"type":"string"},{"example":"D49LoBOOjvYbqro4Z3rOBOPZmjn2K9ONbpL8AVMn0m95ODvm2o9ExP5","in":"path","name":"active_layer_id","required":true,"schema":{"type":"string"}}],"produces":["application/json"],"responses":{"200":{"description":"OK","schema":{"properties":{"data":{"example":["admin","user1"],"type":"array"}},"type":"object"}},"403":{"description":"token required","schema":{"properties":{"error":{"example":"token required","type":"string"}},"type":"object"}}},"summary":"Get users who use a layer as the active layer","tags":["Projects"]}},"/api/projects/{project_id}":{"delete":{"parameters":[{"example":1,"in":"path","name":"project_id","required":true,"schema":{"type":"int"}},{"description":"Token","in":"query","name":"token","required":false,"type":"string"}],"produces":["application/json"],"responses":{"204":{"description":"OK"},"403":{"description":"token required or user is not an owner of the project","schema":{"properties":{"error":{"example":"token required","type":"string"}},"type":"object"}},"404":{"description":"Project does not exists","schema":{"properties":{"error":{"example":"Project does not exist","type":"string"}},"type":"object"}}},"summary":"Delete a project","tags":["Projects"]},"get":{"parameters":[{"example":1,"in":"path","name":"project_id","required":true,"schema":{"type":"int"}},{"description":"Token","in":"query","name":"token","required":false,"type":"string"}],"produces":["application/json"],"responses":{"200":{"description":"OK","schema":{"properties":{"data":{"$ref":"#/definitions/ProjectGet"}},"type":"object"}},"403":{"description":"token required or permission denied for active layer","schema":{"properties":{"error":{"example":"token required","type":"string"}},"type":"object"}},"404":{"description":"Project does not exist","schema":{"properties":{"error":{"example":"Project does not exist","type":"string"}},"type":"object"}}},"summary":"Get project","tags":["Projects"]},"put":{"parameters":[{"example":1,"in":"path","name":"project_id","required":true,"schema":{"type":"int"}},{"in":"body","name":"body","required":true,"schema":{"properties":{"active_layer_id":{"example":"6On03GwRvYx77Xr9NRb2JMrxjrbe2gQ1M38Xok","required":true,"type":"string"},"additional_layers_ids":{"example":["Ybmjyo7NX5ybjmmwqYBNxe8qng9pV5NRB6g","7k207J4v3pKbbYrxBvMnOErKjrMLnAQgE78YqD"],"required":false,"type":"array"},"map_center":{"properties":{"coordinates":{"example":[21,52]},"type":{"example":"Point"}},"required":true,"type":"object"},"map_zoom":{"example":1,"required":true},"name":{"description":"Name of the project","example":"name","required":true,"type":"string"}},"type":"object"}},{"description":"Token","in":"query","name":"token","required":false,"type":"string"}],"produces":["application/json"],"responses":{"204":{"description":"OK"},"400":{"description":"Data incorrect","schema":{"properties":{"error":{"example":"message","type":"string"}},"type":"object"}},"403":{"description":"token required or permission denied to active/additional layer or user is not an owner of the project","schema":{"properties":{"error":{"example":"token required","type":"string"}},"type":"object"}},"404":{"description":"Project does not exist","schema":{"properties":{"error":{"example":"Project does not exist","type":"string"}},"type":"object"}}},"summary":"Edit project","tags":["Projects"]}},"/api/services":{"get":{"parameters":[{"description":"Token","in":"query","name":"token","required":false,"type":"string"}],"produces":["application/json"],"responses":{"200":{"schema":{"properties":{"services":{"items":{"properties":{"group":{"type":"string"},"id":{"type":"string"},"layers":{"type":"string"},"name":{"type":"string"},"url":{"type":"string"}},"type":"object"},"type":"array"}},"type":"object"}},"403":{"description":"Token required","schema":{"properties":{"error":{"example":"token required","type":"string"}},"type":"object"}}},"summary":"Get services","tags":["Services"]},"post":{"parameters":[{"in":"body","name":"body","required":true,"schema":{"properties":{"layers":{"required":true,"type":"string"},"name":{"required":true,"type":"string"},"public":{"required":false,"type":"boolean"},"url":{"required":true,"type":"string"}},"type":"object"}},{"description":"Token","in":"query","name":"token","required":false,"type":"string"}],"produces":["application/json"],"responses":{"200":{"description":"Service","schema":{"properties":{"group":{"type":"string"},"id":{"type":"string"},"layers":{"type":"string"},"name":{"type":"string"},"url":{"type":"string"}},"type":"object"}},"403":{"description":"Token required","schema":{"properties":{"error":{"example":"token required","type":"string"}},"type":"object"}}},"summary":"Add new service","tags":["Services"]}},"/api/services/{sid}":{"delete":{"parameters":[{"description":"Service ID","in":"path","name":"sid","required":true,"type":"string"},{"description":"Token","in":"query","name":"token","required":false,"type":"string"}],"produces":["application/json"],"responses":{"200":{"schema":{"properties":{"aid":{"type":"string"}},"type":"object"}},"403":{"description":"Token required","schema":{"properties":{"error":{"example":"token required","type":"string"}},"type":"object"}}},"summary":"Delete service","tags":["Services"]}},"/api/tags":{"get":{"parameters":[{"description":"Token","in":"query","name":"token","required":false,"type":"string"}],"produces":["application/json"],"responses":{"200":{"description":"OK","schema":{"properties":{"data":{"items":{"oneOf":[{"$ref":"#/definitions/LayerTagGet"}]},"type":"array"}},"type":"object"}},"403":{"description":"token required","schema":{"properties":{"error":{"example":"token required","type":"string"}},"type":"object"}}},"summary":"Get all tags","tags":["Layers tags"]},"post":{"parameters":[{"in":"body","name":"body","required":true,"schema":{"properties":{"color":{"example":"#123456","required":true,"type":"string"},"name":{"description":"Name of the new tag. Must be unique among other tags","example":"name","required":true,"type":"string"}},"type":"object"}},{"description":"Token","in":"query","name":"token","required":false,"type":"string"}],"produces":["application/json"],"responses":{"201":{"description":"OK","schema":{"properties":{"data":{"description":"ID of newly created tag","example":1}},"type":"object"}},"400":{"description":"Request payload lacks obligatory data or tag with such name already exists.","schema":{"properties":{"error":{"example":"message","type":"string"}},"type":"object"}},"403":{"description":"token required","schema":{"properties":{"error":{"example":"token required","type":"string"}},"type":"object"}}},"summary":"Create new tag","tags":["Layers tags"]}},"/api/tags/layers":{"delete":{"description":"Tag may not be removed from a layer which isn't tagged with it.<br/>","parameters":[{"description":"ID of a layer to be untagged","in":"query","name":"layer_id","required":true,"type":"string"},{"description":"ID of a tag which will be removed from the layer","in":"query","name":"tag_id","required":true,"type":"int"},{"description":"Token","in":"query","name":"token","required":false,"type":"string"}],"produces":["application/json"],"responses":{"204":{"description":"ok"},"400":{"description":"Request payload lacks obligatory data or data is incorrect."},"403":{"description":"token required","schema":{"properties":{"error":{"example":"token required","type":"string"}},"type":"object"}}},"summary":"Untag a layer.","tags":["Layers tags"]},"post":{"description":"Layer may not be tagged twice with one tag.<br/>","parameters":[{"description":"ID of a layer to be tagged","in":"query","name":"layer_id","required":true,"schema":{"type":"string"}},{"description":"ID of a tag which the layer will be tagged with.","in":"query","name":"tag_id","required":true,"schema":{"type":"int"}},{"description":"Token","in":"query","name":"token","required":false,"type":"string"}],"produces":["application/json"],"responses":{"204":{"description":"ok"},"400":{"description":"Request payload lacks obligatory data or data is incorrect."},"403":{"description":"token required","schema":{"properties":{"error":{"example":"token required","type":"string"}},"type":"object"}}},"summary":"Tag a layer","tags":["Layers tags"]}},"/api/tags/{tag_id}":{"delete":{"parameters":[{"example":1,"in":"path","name":"tag_id","required":true,"schema":{"type":"int"}},{"description":"Token","in":"query","name":"token","required":false,"type":"string"}],"produces":["application/json"],"responses":{"204":{"description":"OK"},"403":{"description":"token required","schema":{"properties":{"error":{"example":"token required","type":"string"}},"type":"object"}},"404":{"description":"Tag does not exists","schema":{"properties":{"error":{"example":"Tag with ID '1' does not exist","type":"string"}},"type":"object"}}},"summary":"Delete a tag","tags":["Layers tags"]},"put":{"parameters":[{"example":1,"in":"path","name":"tag_id","required":true,"schema":{"type":"int"}},{"in":"body","name":"body","required":true,"schema":{"properties":{"color":{"example":"#123456","required":true,"type":"string"},"name":{"description":"Name of the new tag. Must be unique among other tags","example":"name","required":true,"type":"string"}},"type":"object"}},{"description":"Token","in":"query","name":"token","required":false,"type":"string"}],"produces":["application/json"],"responses":{"204":{"description":"OK"},"400":{"description":"Tag with such name already exists.","schema":{"properties":{"error":{"example":"message","type":"string"}},"type":"object"}},"403":{"description":"token required","schema":{"properties":{"error":{"example":"token required","type":"string"}},"type":"object"}},"404":{"description":"Tag does not exists","schema":{"properties":{"error":{"example":"Tag with ID '1' does not exist","type":"string"}},"type":"object"}}},"summary":"Replace tag data","tags":["Layers tags"]}},"/api/users":{"delete":{"parameters":[{"in":"body","name":"body","required":true,"schema":{"properties":{"user":{"description":"User login","example":"test","required":true,"type":"string"}},"type":"object"}}],"produces":["application/json"],"responses":{"200":{"description":"Confirmation","schema":{"properties":{"users":{"example":"user deleted","type":"string"}},"type":"object"}}},"summary":"Delete user","tags":["Auth"]},"get":{"parameters":[{"description":"Token","in":"query","name":"token","required":false,"type":"string"}],"produces":["application/json"],"responses":{"200":{"description":"Token","schema":{"properties":{"users":{"properties":{"user":{"example":"group","type":"string"}},"type":"object"}},"type":"object"}},"403":{"description":"Token required","schema":{"properties":{"error":{"example":"invalid token","type":"string"}},"type":"object"}}},"summary":"Get users","tags":["Auth"]},"post":{"parameters":[{"in":"body","name":"body","required":true,"schema":{"properties":{"group":{"description":"User group","example":"default","required":false,"type":"string"},"password":{"description":"User password","example":"test","required":true,"type":"string"},"user":{"description":"User login","example":"test","required":true,"type":"string"}},"type":"object"}}],"produces":["application/json"],"responses":{"201":{"description":"Confirmation","schema":{"properties":{"users":{"example":"user created","type":"string"}},"type":"object"}},"409":{"description":"User exists","schema":{"properties":{"error":{"example":"user exists","type":"string"}},"type":"object"}}},"summary":"Add new user","tags":["Auth"]},"put":{"parameters":[{"in":"body","name":"body","required":true,"schema":{"properties":{"group":{"description":"User group","example":"default","required":true,"type":"string"},"user":{"description":"User login","example":"test","required":true,"type":"string"}},"type":"object"}}],"produces":["application/json"],"responses":{"200":{"description":"Confirmation","schema":{"properties":{"users":{"example":"user assigned","type":"string"}},"type":"object"}},"409":{"description":"User/Group exists","schema":{"properties":{"error":{"example":"user/group not exists","type":"string"}},"type":"object"}}},"summary":"Assign user to group","tags":["Auth"]}},"/api/users/groups":{"delete":{"parameters":[{"in":"body","name":"body","required":true,"schema":{"properties":{"group":{"description":"Group name","example":"test","required":true,"type":"string"}},"type":"object"}}],"produces":["application/json"],"responses":{"200":{"description":"Success","schema":{"properties":{"group":{"description":"Group deleted","type":"string"}},"type":"object"}},"400":{"description":"Group not exists","schema":{"properties":{"error":{"description":"Group not exists","type":"string"}},"type":"object"}},"403":{"description":"Invalid credentials","schema":{"properties":{"error":{"example":"invalid credentials","type":"string"}},"type":"object"}}},"summary":"Delete group","tags":["Auth"]},"get":{"parameters":[{"description":"Token","in":"query","name":"token","required":false,"type":"string"}],"produces":["application/json"],"responses":{"200":{"description":"Token","schema":{"properties":{"groups":{"items":{"type":"string"},"type":"array"}},"type":"object"}},"403":{"description":"Token required","schema":{"properties":{"error":{"example":"invalid token","type":"string"}},"type":"object"}}},"summary":"Get groups","tags":["Auth"]},"post":{"parameters":[{"in":"body","name":"body","required":true,"schema":{"properties":{"group":{"description":"Group name","example":"test","required":true,"type":"string"}},"type":"object"}}],"produces":["application/json"],"responses":{"201":{"description":"Success","schema":{"properties":{"group":{"description":"New group added","type":"string"}},"type":"object"}},"400":{"description":"Group exists","schema":{"properties":{"error":{"description":"Group exists","type":"string"}},"type":"object"}},"403":{"description":"Invalid credentials","schema":{"properties":{"error":{"example":"invalid credentials","type":"string"}},"type":"object"}}},"summary":"Add new group","tags":["Auth"]}}},"schemes":["http","https"],"swagger":"2.0"}
